# KisaMore ‚Äî —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç–µ–ª–ª–∞–∂–∞–º–∏ (Raspberry Pi)

KisaMore ‚Äî —ç—Ç–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ **Python + FastAPI** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç–µ–ª–ª–∞–∂–∞–º–∏ –≤ —Ç–µ–ø–ª–∏—Ü–µ
(—Å–≤–µ—Ç üí° –∏ –ø–æ–ª–∏–≤ üíß), —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–æ–µ –Ω–∞ —Ä–∞–±–æ—Ç—É —Å **Raspberry Pi + 12–í —Ä–µ–ª–µ–π–Ω–∞—è –ø–ª–∞—Ç–∞**.

–ü—Ä–æ–µ–∫—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–∞–∂–¥—ã–º —Å—Ç–µ–ª–ª–∞–∂–æ–º –∫–∞–∫ –≤—Ä—É—á–Ω—É—é, —Ç–∞–∫ –∏ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é, –∞ —Ç–∞–∫–∂–µ
–∑–∞–ø—É—Å–∫–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –Ω–∞ –æ–±—ã—á–Ω–æ–º –ü–ö –≤ —Ä–µ–∂–∏–º–µ —ç–º—É–ª—è—Ü–∏–∏ GPIO –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìä –í–µ–±-–ø–∞–Ω–µ–ª—å —Å –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ —Å—Ç–µ–ª–ª–∞–∂–µ–π
- üí° –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–µ—Ç–æ–º (12–í LED-–ª–µ–Ω—Ç—ã)
- üíß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–∏–≤–æ–º (12–í –∫–ª–∞–ø–∞–Ω—ã)
- üîÄ –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã: **–ü–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é / –í—Ä—É—á–Ω—É—é**
- üïí –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–±–µ–∑ JSON)
- ‚öôÔ∏è –ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ YAML:
  - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–µ–ª–ª–∞–∂–µ–π
  - –ø—Ä–∏–≤—è–∑–∫–∞ —Å—Ç–µ–ª–ª–∞–∂ ‚Üí –∫–∞–Ω–∞–ª —Ä–µ–ª–µ (1‚Äì16)
  - –ø—Ä–∏–≤—è–∑–∫–∞ –∫–∞–Ω–∞–ª —Ä–µ–ª–µ ‚Üí GPIO pin Raspberry Pi
- üß™ –ó–∞–ø—É—Å–∫ –Ω–∞ –ü–ö (Windows / Linux / macOS) –≤ —Ä–µ–∂–∏–º–µ **mock GPIO**
- üîÅ –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–æ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è (–¥–∞—Ç—á–∏–∫–∏, –∑–∞—â–∏—Ç–∞ –Ω–∞—Å–æ—Å–∞, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)

---

## üß© –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–∫—Ä–∞—Ç–∫–æ)

- **Backend**: Python 3.11, FastAPI
- **Frontend**: HTML + CSS + Vanilla JS
- **GPIO**:
  - —Ä–µ–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º (Raspberry Pi)
  - mock-—Ä–µ–∂–∏–º (–ü–ö)
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: SQLite (–ª–æ–∫–∞–ª—å–Ω–æ)
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: YAML (`config/kisamore.yaml`)

–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å–º. –≤ —Ñ–∞–π–ª–µ [`ARCHITECTURE.md`](ARCHITECTURE.md).

---

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ (Raspberry Pi)

```bash
python -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt

uvicorn app.main:app --host 0.0.0.0 --port 8000
```

–û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- üåê –í–µ–±-–ø–∞–Ω–µ–ª—å: `http://raspberrypi.local:8000/`
- üîå API —Å–æ—Å—Ç–æ—è–Ω–∏—è: `http://raspberrypi.local:8000/api/state`

---

## üíª –ó–∞–ø—É—Å–∫ –Ω–∞ –ü–ö (—Ä–µ–∂–∏–º —ç–º—É–ª—è—Ü–∏–∏ GPIO)

–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ Raspberry Pi –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

```bash
uvicorn app.main:app --reload --host 127.0.0.1 --port 8000
```

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–æ:
```
[KisaMore] GPIO disabled (mock mode). Running on non-Raspberry Pi.
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª:
```
config/kisamore.yaml
```

–í —Ñ–∞–π–ª–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è:
- –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–µ–ª–ª–∞–∂–µ–π
- –∫–∞–∫–æ–π –∫–∞–Ω–∞–ª —Ä–µ–ª–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–≤–µ—Ç–æ–º –∏ –ø–æ–ª–∏–≤–æ–º –∫–∞–∂–¥–æ–≥–æ —Å—Ç–µ–ª–ª–∞–∂–∞
- –∫–∞–∫–æ–π GPIO pin —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∫–∞–∂–¥–æ–º—É –∫–∞–Ω–∞–ª—É —Ä–µ–ª–µ

–ü—É—Ç—å –∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å:
```bash
export KISAMORE_CONFIG=/path/to/kisamore.yaml
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
KisaMore/
‚îú‚îÄ‚îÄ app/                # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ main.py
‚îÇ   ‚îú‚îÄ‚îÄ runtime.py
‚îÇ   ‚îú‚îÄ‚îÄ gpio_driver.py
‚îÇ   ‚îú‚îÄ‚îÄ platform.py
‚îÇ   ‚îú‚îÄ‚îÄ routes_*.py
‚îÇ   ‚îú‚îÄ‚îÄ static/          # CSS / JS
‚îÇ   ‚îî‚îÄ‚îÄ templates/       # HTML —à–∞–±–ª–æ–Ω—ã
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ kisamore.yaml
‚îú‚îÄ‚îÄ ARCHITECTURE.md
‚îú‚îÄ‚îÄ DEV_NOTES.md
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ requirements.txt
```

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –§–∞–π–ª –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö SQLite (`*.db`) **–Ω–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏**
- –ü—Ä–æ–µ–∫—Ç —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –Ω–∞ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ:
  - –¥–∞—Ç—á–∏–∫–∏ —É—Ä–æ–≤–Ω—è –≤–æ–¥—ã
  - –∑–∞—â–∏—Ç–∞ –Ω–∞—Å–æ—Å–∞ –æ—Ç —Å—É—Ö–æ–≥–æ —Ö–æ–¥–∞
  - –ª–æ–≥ —Å–æ–±—ã—Ç–∏–π
  - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Home Assistant / MQTT

---

# üá¨üáß KisaMore (English ‚Äì short)

**KisaMore** is a Raspberry Pi based greenhouse rack control system
for light üí° and watering üíß, built with **Python and FastAPI**.

### Features
- Web dashboard
- Manual and scheduled control
- Flexible hardware configuration (YAML)
- 16-channel relay support
- GPIO mock mode for PC development

### Tech stack
- Python 3.11
- FastAPI
- SQLite
- GPIO (real / mock)

### Run (development)
```bash
uvicorn app.main:app --reload
```

Designed for Raspberry Pi, fully runnable on PC for development and testing.

---

## License

Private / internal project (license to be defined).